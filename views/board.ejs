<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Poster Board</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="/public/styles.css">
</head>
<body>
    <div class="container posterContainer" >
        <div class="row boardRow">
            <% for( let i = posterArray.length - 1 ; i >= 0; i-- ) { %>
                <% const poster = posterArray[i] %>
                <div class="column boardColumn col-lg-3 col-md-4 col-sm-6">
                    <img src="/public/images/<%= poster.name %>" alt="<%= poster.name %>" class="img-fluid boardImage">
                </div>
            <% } %>
        </div>
        
        
    </div>

    </div>
    <!-- Add Bootstrap JS and jQuery (optional) if needed -->
  
    <!-- Add Bootstrap JS and jQuery (optional) if needed -->
    <!-- <script >
        var scroll = setInterval(function(){
    window.scrollBy(0,660);
  }, 5000);
    </script> -->
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
     <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
<script>
 // Client side
const socket = io();

socket.on('newPoster', (data) => {
  // Create a new poster element
  const newPoster = document.createElement('div');
  newPoster.classList.add('column', 'boardColumn', 'col-lg-3', 'col-md-4', 'col-sm-6');
  
  const newImage = document.createElement('img');
  newImage.src = `/public/images/${data}`; 
// Assuming 'posterName' is a property in your data
  newImage.alt = data.posterName;
  newImage.classList.add('img-fluid', 'boardImage');
  
  newPoster.appendChild(newImage);
  
  // Append the new poster to the board
  const board = document.querySelector('.boardRow');
  board.prepend(newPoster); // prepend to add the poster at the beginning
  location.reload()
});

socket.on('posterDeleted', (data) => {
   
  // Find the poster element
  const posters = document.querySelectorAll('.boardColumn');
  
  posters.forEach(poster => {
    console.log(poster.firstChild.nextSibling.alt)
    if (poster.firstChild.nextSibling.alt === data) { // Assuming 'posterName' is a property in your data
      // Remove the poster from the board
      poster.remove();
    }
  });
});

</script>
</body>
 
    
</html>